<html>
<head>
<script src="libs/strophe.min.js" ></script>
<script src="libs/strophe.muc.min.js" ></script>
<script src="libs/strophe.disco.min.js" ></script>
<script src="libs/strophe.jingle.sdp.js"></script>
<script src="libs/jquery-1.12.4.min.js"></script>
<script src="libs/request.min.js"></script>
<script src="xmppvideoroom.js" ></script>
<script src="xmppvideoroom.json" ></script>
</head>
<body> 
	XMPP Url:<input id="xmppServer" type="text" size="50" /> 
	Room id:<input id="xmppRoom" type="text" />
	User id:<input id="xmppUser" type="text" value="webuser" /><br/>
	WebRTC stream:<input id="webrtcStream" type="text" size="50" value="rtsp://217.17.220.110/axis-media/media.amp" />
	<input type="button" value="connect" onclick="connect()" />
	<input type="button" value="disconnect" onclick="disconnect()" />
</body>
<script>
	// set default value
	document.querySelector('#xmppServer').value  = xmppRoomConfig.url;
	document.querySelector('#xmppRoom').value = xmppRoomConfig.roomId;
		
	var serverName = null;
	var userName = null;	
	var roomName = null;
	var xmpp = null;
	
	function connect() {	
		serverName = document.querySelector('#xmppServer').value;
		userName = document.querySelector('#xmppUser').value;	
		roomName = document.querySelector('#xmppRoom').value;

		var webrtcStream = document.querySelector('#webrtcStream').value;
	
		xmpp = new XMPPVideoRoom(serverName, null);
		xmpp.join(roomName, webrtcStream, userName);
	}
	
	function disconnect() {
		if (xmpp) {
			xmpp.leave(roomName, userName);
		}
		xmpp = null;
	}
	
	window.onbeforeunload = function() { 
		disconnect();
	};		
</script>
</html>